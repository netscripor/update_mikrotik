# üì¶ MikroTik Batch Updater

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è:
- –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö MikroTik RouterOS
- —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
- –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—à–∏–≤–∫–∏ RouterBOARD
- —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –º–∞—Å—Å–æ–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ —Å–ø–∏—Å–∫–∞.

---

## ‚öôÔ∏è –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–£–±–µ–¥–∏—Å—å, —á—Ç–æ —É —Ç–µ–±—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

```bash
pip install netmiko colorama
```

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- `mikrotik_update.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
- `mikrotik_update.log` ‚Äî –ª–æ–≥ —Ä–∞–±–æ—Ç—ã (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- —Ñ–∞–π–ª —Å–æ —Å–ø–∏—Å–∫–æ–º IP (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –ø–æ –æ–¥–Ω–æ–º—É IP –≤ —Å—Ç—Ä–æ–∫–µ

---

## üõ† –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–µ–∂–∏–º—ã

### 1. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º (gather)

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ RouterOS –∏ –Ω–∞–ª–∏—á–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:

```bash
python3 mikrotik_update.py --mode gather --ip 192.168.88.1 --user admin
```

–ò–ª–∏ –ø–æ —Å–ø–∏—Å–∫—É:

```bash
python3 mikrotik_update.py --mode gather --file ip_list.txt --user admin
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (upgrade)

–û–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç—ã, –ø—Ä–æ—à–∏–≤–∫—É RouterBOARD –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:

```bash
python3 mikrotik_update.py --mode upgrade --ip 192.168.88.1 --user admin
```

–ú–∞—Å—Å–æ–≤–æ:

```bash
python3 mikrotik_update.py --mode upgrade --file ip_list.txt --user admin
```

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω –ø–∞—Ä–æ–ª—å:

```
Password:
```

---

## üìë –ü—Ä–∏–º–µ—Ä—ã –≤—ã–≤–æ–¥–∞

```bash
[2025-06-20 17:24:30] 10.111.1.3 ‚Äî –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ 6.49.18. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é...
[2025-06-20 17:24:30] 10.111.1.3 ‚Äî –ö–æ–º–∞–Ω–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞. –û–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏...
[2025-06-20 17:26:00] 10.111.1.3 ‚Äî –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å–Ω–æ–≤–∞ –≤ —Å–µ—Ç–∏
[2025-06-20 17:26:01] 10.111.1.3 ‚Äî –¢—Ä–µ–±—É–µ—Ç—Å—è RouterBOARD upgrade: 6.49.13 ‚Üí 6.49.18
[2025-06-20 17:26:05] 10.111.1.3 ‚Äî RouterBOARD upgrade –≤—ã–ø–æ–ª–Ω–µ–Ω. –û—Ç–ø—Ä–∞–≤–ª—è—é –∫–æ–º–∞–Ω–¥—É –Ω–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É...
```

---

## üîÑ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

| –≠—Ç–∞–ø | –î–µ–π—Å—Ç–≤–∏–µ |
|------|----------|
| 1    | –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ SSH (Netmiko) |
| 2    | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `/system package update check-for-updates` |
| 3    | –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É |
| 4    | –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç `y` |
| 5    | –ñ–¥—ë—Ç –≤–æ–∑–≤—Ä–∞—Ç–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ (–¥–æ 5 –º–∏–Ω—É—Ç) |
| 6    | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `/system routerboard print` |
| 7    | –ï—Å–ª–∏ `upgrade-firmware` > `current-firmware`, –¥–µ–ª–∞–µ—Ç upgrade –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É |

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –ª–æ–≥–∏–Ω—ã –∏ –ø–∞—Ä–æ–ª–∏ –≤–≤–æ–¥—è—Ç—Å—è –≤—Ä—É—á–Ω—É—é –∏ **–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è **–ø–æ –æ—á–µ—Ä–µ–¥–∏**, —Å –ø–∞—É–∑–æ–π –º–µ–∂–¥—É –Ω–∏–º–∏
- –õ–æ–≥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `mikrotik_update.log` (—É–¥–æ–±–Ω–æ –¥–ª—è –∞—É–¥–∏—Ç–∞)

---

## üìå –°–æ–≤–µ—Ç—ã

- –£–±–µ–¥–∏—Å—å, —á—Ç–æ SSH –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω –Ω–∞ –≤—Å–µ—Ö —Ü–µ–ª–µ–≤—ã—Ö MikroTik
- –°–∫—Ä–∏–ø—Ç –Ω–µ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ ‚Äî –º–æ–∂–Ω–æ —Ä–æ—Ç–∞—Ü–∏—é –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–º–æ—Ç—Ä–∏ –≤ `mikrotik_update.log`

---

## üìÅ –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ ip_list.txt

```
10.111.1.2
10.111.1.3
192.168.88.1
```
‚ö†Ô∏è –°–µ–π—á–∞—Å —Å–∫—Ä–∏–ø—Ç –Ω–∞ —ç—Ç–∞–ø–µ –±–æ–µ–≤–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ RO v6.
–£–∂–µ –æ–±–∫–∞—Ç–∞–Ω –Ω–∞ ~20 —Ç–æ—á–∫–∞—Ö –≤ –ø—Ä–æ–¥–µ ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ, –Ω–æ –µ—â—ë —à–ª–∏—Ñ—É–µ—Ç—Å—è.

